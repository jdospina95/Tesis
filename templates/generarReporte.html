<!DOCTYPE HTML>
<!--
	Phantom by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Herramienta Instituto</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='assets/css/main.css') }}" />
		<noscript><link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='assets/css/noscript.css') }}" /></noscript>
		<link rel="icon" href="http://www.ciegosysordos.org.co/wp/wp-content/uploads/2018/01/cropped-favicon_instituto_ciegos_sordos_valle_cauca-1-32x32.png" sizes="32x32" />
  		<link rel="icon" href="http://www.ciegosysordos.org.co/wp/wp-content/uploads/2018/01/cropped-favicon_instituto_ciegos_sordos_valle_cauca-1-192x192.png" sizes="192x192" />
		<script src="https://unpkg.com/jspdf@latest/dist/jspdf.min.js"></script>
	</head>
	<body class="is-preload">
		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div class="inner">
							<!-- Logo -->
								<a href="/MenuInicio" class="logo">
									<span class="title">Herramienta Instituto</span>
								</a>

							<!-- Nav -->
								<nav>
									<ul>
										<li><a href="#menu">Menu</a></li>
									</ul>
								</nav>
						</div>
					</header>
					
				<!-- Menu -->
					<nav id="menu">
						<h2>Menu</h2>
						<ul>
							<li><a href="/MenuInicio">Menu Inicio</a></li>
							<li><a href="/VerificarProgreso">Verificar Progreso</a></li>
							<li><a href="/GenerarReporte">Generar Reporte</a></li>
							<li><a href="/CerrarSesion">Cerrar Sesion</a></li>
						</ul>
					</nav>
					
				<!-- Main -->
					<div id="main">
						<div class="inner">
                            <!-- Form -->
								<section>
									<h2>Generar Reporte</h2>
									<div class="row">
										<nav2 class="col-3 col-12-medium">
											<ul class="alt" id="myid" style="min-height: 50vh; max-height: 50vh; overflow: auto;">
											    {% for actividad in actividades %}
												<li><a style="cursor: pointer;">{{actividad.fecha}}</a></li>
												{% endfor %}
											</ul>
										</nav2>
										<div class="col-1 col-12-medium"></div>
										<div class="col-8 col-12-medium">
											<h3 id="actividad"></h3>
											<p id="usuario"></p>
											<ul id="preguntas"></ul>
										</div>
									</div>
									<div class="row">
										<div class="col-10 col-12-medium"></div>
										<div class="col-2 col-12-medium">
											<input type="submit" value="Descargar" class="primary" id="descargar"/>
										</div>
									</div>
								</section>
							</div>
						</div>

			</div>

		<!-- Scripts -->
			<script src="{{url_for('static', filename='assets/js/jquery.min.js')}}"></script>
			<script src="{{url_for('static', filename='assets/js/browser.min.js')}}"></script>
			<script src="{{url_for('static', filename='assets/js/breakpoints.min.js')}}"></script>
			<script src="{{url_for('static', filename='assets/js/util.js')}}"></script>
			<script src="{{url_for('static', filename='assets/js/main.js')}}"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>
			
			<script type="text/javascript">
				$(function() {
				    $("#descargar").hide();
				});
				const actividades = {{actividades | tojson | safe}};
				const usuario = {{usuario | tojson | safe}};
				$("#myid li").click(function() {
					$("#descargar").show();
					const posicion = $(this).prevAll().length;
					const respuestaRespuestas = actividades[posicion].aciertos === "1" ? ' respuesta correcta' : ' respuestas correctas';
					console.log(actividades[posicion]);
					document.getElementById("actividad").innerHTML = actividades[posicion].actividad;
					document.getElementById("usuario").innerHTML = 'El dia ' + actividades[posicion].fecha + ' a la(s) ' + actividades[posicion].hora +
					', ' + usuario + ' realizo la ' + actividades[posicion].actividad.toLowerCase() + ' donde obtuvo ' +
					actividades[posicion].aciertos + respuestaRespuestas;
					
					$( "#descargar" ).click(function() {
						// init the jsPDF library
						const pdf = new jsPDF();
						// @param 1 - Coordinate (in units declared at inception of PDF document) against left edge of the page
						// @param 2 - Coordinate (in units declared at inception of PDF document) against upper edge of the page
						// @param 3 - String or array of strings to be added to the page. Each line is shifted one line down per font, spacing settings declared before this call.
						pdf.text(10, 10, 'El dia 5 de mayo de 2019 a la(s) 12:00 , Pepito Perez realizo la actividad 1');
						pdf.text(10, 20, 'donde obtuvo 1 respuesta correcta');
						// save the PDF document (downloadable)
						pdf.save(usuario+'_'+actividades[posicion].actividad+'_'+actividades[posicion].fecha+'_'+actividades[posicion].hora+'.pdf');
					});
				});
			</script>

	</body>
	
	<style>
		#header {
			padding: 2em 0 0.1em 0 !important;
		}
	</style>
</html>